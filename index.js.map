{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst API_KEY = '49640008-31ceefc585112d8f472f2aefe';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n\nexport async function fetchImages(page = 1, query) {\n    try {\n        const response = await axios(`${BASE_URL}`, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                page: page,\n                safesearch: true,\n                per_page: 15\n            }\n        });\n\n        return response.data;\n    } catch (error) {\n        console.error(\"Помилка запиту:\", error);\n    }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nconst galleryContainer = document.querySelector('.js-image-list');\nconst loader = document.querySelector('.js-loader');\nconst loadMoreButton = document.querySelector('.js-load-more');\n\nlet lightbox = new SimpleLightbox('.gallery a');\n\nexport function createGallery(images) {\n    const markup = images.map(image => `\n        <li class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\">\n                <div class=\"image-container\">\n                    <span class=\"loader\"></span>\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\"\n                    style=\"box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); object-fit: cover;>\n                </div>\n            </a>\n            <div class=\"image-info\">\n                <p class=\"info-item\"><span class=\"info-value\">Likes:</span> ${image.likes}</p>\n                <p class=\"info-item\"><span class=\"info-value\">Views:</span> ${image.views}</p>\n                <p class=\"info-item\"><span class=\"info-value\">Comments:</span> ${image.comments}</p>\n                <p class=\"info-item\"><span class=\"info-value\">Downloads:</span> ${image.downloads}</p>\n            </div>\n        </li>\n    `).join('');\n\n    galleryContainer.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n    hideLoader();\n\n    document.querySelectorAll(\".image-container img\").forEach((img) => {\n        const loader = img.closest(\".image-container\").querySelector(\".loader\");\n        if (img.complete) {\n            loader.classList.remove(\"visible\");\n        } else {\n            img.addEventListener(\"load\", () => {\n                loader.classList.remove(\"visible\");\n            });\n        }\n    });\n\n    if (!lightbox) {\n        lightbox = new SimpleLightbox(\".gallery a\");\n    } else {\n        lightbox.refresh();\n    }\n}\n\nconst galleryItems = document.querySelectorAll(\".gallery-item\");\n\ngalleryItems.forEach((item) => {\n\n    item.addEventListener(\"mouseover\", () => {\n        item.style.transform = \"scale(1.05)\";\n    });\n\n    item.addEventListener(\"mouseout\", () => {\n        item.style.transform = \"scale(1)\";\n    });\n});\n\nconsole.log(loader);\nconsole.log(loadMoreButton);\n\n\nexport function showLoader() {\n    const loader = document.querySelector(\".loader\");\n    if (loader) {\n        loader.classList.add(\"visible\"); // show loader\n    }\n}\n\nexport function hideLoader() {\n    const loader = document.querySelector(\".loader\");\n    if (loader) {\n        loader.classList.remove(\"visible\"); // hide loader\n    }\n}\n\nexport function clearGallery() {\n    galleryContainer.innerHTML = '';\n}\n\nexport function showLoadMoreButton() {\n    loadMoreButton.style.display = 'block';\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreButton.style.display = 'none';\n}","import { fetchImages } from './js/pixabay-api.js';\nimport {\n    createGallery, clearGallery, showLoader,\n    hideLoader, showLoadMoreButton, hideLoadMoreButton\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.querySelector('#search-form');\nconst loadMoreButton = document.querySelector('.js-load-more');\nlet searchQuery = '';\nlet page = 1;\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    searchQuery = event.target.elements.search.value.trim();\n    if (!searchQuery) return;\n    page = 1;\n    clearGallery();\n    hideLoadMoreButton();\n    fetchNewImages();\n});\n\nloadMoreButton.addEventListener('click', () => {\n    let page = 1;\n    page++;\n    fetchNewImages();\n});\n\nasync function fetchNewImages() {\n    showLoader();\n    const data = await fetchImages(page, searchQuery);\n    hideLoader();\n\n    if (!data || !data.hits.length) {\n        iziToast.error({ title: 'Oops!', message: 'No images found.' });\n        hideLoadMoreButton();\n        return;\n    }\n\n    createGallery(data.hits);\n\n    if (page * 15 >= data.totalHits) {\n        hideLoadMoreButton();\n        iziToast.info({ title: 'End of results', message: \"We're sorry, but you've reached the end of search results.\" });\n    } else {\n        showLoadMoreButton();\n    }\n\n    smoothScroll();\n}\n\nfunction smoothScroll() {\n    const galleryItems = document.querySelectorAll('.gallery-item');\n    if (galleryItems.length > 0) {\n        const lastItem = galleryItems[galleryItems.length - 1];\n        const height = lastItem.getBoundingClientRect().height;\n        window.scrollBy({ top: height * 2, behavior: 'smooth' });\n    }\n}"],"names":["API_KEY","BASE_URL","fetchImages","page","query","axios","error","galleryContainer","loader","loadMoreButton","lightbox","SimpleLightbox","createGallery","images","markup","image","hideLoader","img","galleryItems","item","showLoader","clearGallery","showLoadMoreButton","hideLoadMoreButton","searchForm","searchQuery","event","fetchNewImages","data","iziToast","smoothScroll","height"],"mappings":"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"}