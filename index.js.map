{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '49640008-31ceefc585112d8f472f2aefe';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(page = 1, query) {\n    try {\n        const response = await axios(`${BASE_URL}`, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                page: page,\n                per_page: 15\n            }\n        });\n\n        return response.data;\n    } catch (error) {\n        console.error(\"Помилка запиту:\", error);\n    }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.js-image-list');\nconst loader = document.querySelector('.js-loader');\nconst loadMoreButton = document.querySelector('.js-load-more');\n\nlet lightbox = new SimpleLightbox('.gallery a');\n\nexport function createGallery(images) {\n    const markup = images.map(image => `\n        <li class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\">\n                <div class=\"image-container\">\n                    <span class=\"loader\"></span>\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\">\n                </div>\n            </a>\n            <div class=\"image-info\">\n                <p><strong>Likes:</strong> ${image.likes}</p>\n                <p><strong>Views:</strong> ${image.views}</p>\n                <p><strong>Comments:</strong> ${image.comments}</p>\n                <p><strong>Downloads:</strong> ${image.downloads}</p>\n            </div>\n        </li>\n    `).join('');\n\n    galleryContainer.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n    hideLoader();\n}\n\nexport function clearGallery() {\n    galleryContainer.innerHTML = '';\n}\n\nexport function showLoader() {\n    loader.style.display = 'block';\n}\n\nexport function hideLoader() {\n    loader.style.display = 'none';\n}\n\nexport function showLoadMoreButton() {\n    loadMoreButton.style.display = 'block';\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreButton.style.display = 'none';\n}","import { fetchImages } from './js/pixabay-api.js';\nimport {\n    createGallery, clearGallery, showLoader,\n    hideLoader, showLoadMoreButton, hideLoadMoreButton\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.querySelector('#search-form');\nconst loadMoreButton = document.querySelector('.js-load-more');\nlet searchQuery = '';\nlet page = 1;\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    searchQuery = event.target.elements.search.value.trim();\n    if (!searchQuery) return;\n    page = 1;\n    clearGallery();\n    hideLoadMoreButton();\n    fetchNewImages();\n});\n\nloadMoreButton.addEventListener('click', () => {\n    page++;\n    fetchNewImages();\n});\n\nasync function fetchNewImages() {\n    showLoader();\n    const data = await fetchImages(page, searchQuery);\n    hideLoader();\n\n    if (!data || !data.hits.length) {\n        iziToast.error({ title: 'Oops!', message: 'No images found.' });\n        hideLoadMoreButton();\n        return;\n    }\n\n    createGallery(data.hits);\n\n    if (page * 15 >= data.totalHits) {\n        hideLoadMoreButton();\n        iziToast.info({ title: 'End of results', message: \"We're sorry, but you've reached the end of search results.\" });\n    } else {\n        showLoadMoreButton();\n    }\n\n    smoothScroll();\n}\n\nfunction smoothScroll() {\n    const galleryItems = document.querySelectorAll('.gallery-item');\n    if (galleryItems.length > 0) {\n        const lastItem = galleryItems[galleryItems.length - 1];\n        const height = lastItem.getBoundingClientRect().height;\n        window.scrollBy({ top: height * 2, behavior: 'smooth' });\n    }\n}"],"names":["API_KEY","BASE_URL","fetchImages","page","query","error","galleryContainer","loader","loadMoreButton","lightbox","SimpleLightbox","createGallery","images","markup","image","hideLoader","clearGallery","showLoader","showLoadMoreButton","hideLoadMoreButton","searchForm","searchQuery","event","fetchNewImages","data","iziToast","smoothScroll","galleryItems","height"],"mappings":"6vBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAO,EAAGC,EAAO,CAC/C,GAAI,CAaA,OAZiB,MAAM,MAAM,GAAGH,CAAQ,GAAI,CACxC,OAAQ,CACJ,IAAKD,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMD,EACN,SAAU,EACb,CACb,CAAS,GAEe,IACnB,OAAQE,EAAO,CACZ,QAAQ,MAAM,kBAAmBA,CAAK,CACzC,CACL,CClBA,MAAMC,EAAmB,SAAS,cAAc,gBAAgB,EAC1DC,EAAS,SAAS,cAAc,YAAY,EAC5CC,EAAiB,SAAS,cAAc,eAAe,EAE7D,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAEvC,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAASD,EAAO,IAAIE,GAAS;AAAA;AAAA,uBAEhBA,EAAM,aAAa;AAAA;AAAA;AAAA,gCAGVA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,6CAIzBA,EAAM,KAAK;AAAA,6CACXA,EAAM,KAAK;AAAA,gDACRA,EAAM,QAAQ;AAAA,iDACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAG3D,EAAE,KAAK,EAAE,EAEVR,EAAiB,mBAAmB,YAAaO,CAAM,EACvDJ,EAAS,QAAO,EAChBM,GACJ,CAEO,SAASC,GAAe,CAC3BV,EAAiB,UAAY,EACjC,CAEO,SAASW,GAAa,CACzBV,EAAO,MAAM,QAAU,OAC3B,CAEO,SAASQ,GAAa,CACzBR,EAAO,MAAM,QAAU,MAC3B,CAEO,SAASW,GAAqB,CACjCV,EAAe,MAAM,QAAU,OACnC,CAEO,SAASW,GAAqB,CACjCX,EAAe,MAAM,QAAU,MACnC,CC1CA,MAAMY,EAAa,SAAS,cAAc,cAAc,EAClDZ,EAAiB,SAAS,cAAc,eAAe,EAC7D,IAAIa,EAAc,GACdlB,EAAO,EAEXiB,EAAW,iBAAiB,SAAU,MAAOE,GAAU,CACnDA,EAAM,eAAc,EACpBD,EAAcC,EAAM,OAAO,SAAS,OAAO,MAAM,OAC5CD,IACLlB,EAAO,EACPa,IACAG,IACAI,IACJ,CAAC,EAEDf,EAAe,iBAAiB,QAAS,IAAM,CAC3CL,IACAoB,GACJ,CAAC,EAED,eAAeA,GAAiB,CAC5BN,IACA,MAAMO,EAAO,MAAMtB,EAAYC,EAAMkB,CAAW,EAGhD,GAFAN,IAEI,CAACS,GAAQ,CAACA,EAAK,KAAK,OAAQ,CAC5BC,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,kBAAkB,CAAE,EAC9DN,IACA,MACH,CAEDR,EAAca,EAAK,IAAI,EAEnBrB,EAAO,IAAMqB,EAAK,WAClBL,IACAM,EAAS,KAAK,CAAE,MAAO,iBAAkB,QAAS,4DAA4D,CAAE,GAEhHP,IAGJQ,GACJ,CAEA,SAASA,GAAe,CACpB,MAAMC,EAAe,SAAS,iBAAiB,eAAe,EAC9D,GAAIA,EAAa,OAAS,EAAG,CAEzB,MAAMC,EADWD,EAAaA,EAAa,OAAS,CAAC,EAC7B,sBAAqB,EAAG,OAChD,OAAO,SAAS,CAAE,IAAKC,EAAS,EAAG,SAAU,QAAQ,CAAE,CAC1D,CACL"}