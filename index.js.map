{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst API_KEY = '49640008-31ceefc585112d8f472f2aefe';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page = 1) {\n    const { data } = await axios.get(BASE_URL, {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: 15,\n            page: page\n        }\n    });\n    return data;\n}\n\n\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst loadingMessage = document.querySelector('.loading-message');\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function createGallery(images) {\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <li class=\"gallery-item\">\n            <a href=\"${largeImageURL}\">\n                <div class=\"image-wrapper\">\n                    <span class=\"image-loader\"></span>\n                    <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"gallery-image\" />\n                </div>\n            </a>\n            <div class=\"image-info\">\n                <p class=\"info-item\"><span class=\"info-value\">Likes:</span> ${likes}</p>\n                <p class=\"info-item\"><span class=\"info-value\">Views:</span> ${views}</p>\n                <p class=\"info-item\"><span class=\"info-value\">Comments:</span> ${comments}</p>\n                <p class=\"info-item\"><span class=\"info-value\">Downloads:</span> ${downloads}</p>\n            </div>\n        </li>\n    `).join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    // Додати обробник події завантаження для всіх зображень\n    document.querySelectorAll('.gallery-image').forEach(img => {\n        img.addEventListener('load', function () {\n            // Знаходимо і приховуємо лоадер для цього зображення\n            const loader = this.previousElementSibling;\n            if (loader) {\n                loader.style.display = 'none';\n            }\n        });\n    });\n\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n    loader.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n    loader.classList.add('is-hidden');\n}\n\nexport function showLoadMoreButton() {\n    loadMoreBtn.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreBtn.classList.add('is-hidden');\n}\n\nexport function showLoadingMessage() {\n    loadingMessage.classList.remove('is-hidden');\n}\n\nexport function hideLoadingMessage() {\n    loadingMessage.classList.add('is-hidden');\n}\n\nexport function smoothScroll() {\n    const card = document.querySelector('.gallery-item');\n    if (card) {\n        const cardHeight = card.getBoundingClientRect().height;\n        window.scrollBy({\n            left: 0,\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n    }\n}","import { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n    showLoadingMessage,\n    hideLoadingMessage,\n    smoothScroll\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.querySelector('.search-form');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst searchInput = document.querySelector('input[name=\"searchQuery\"]');\n\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\n\n// Ховаємо кнопку при запуску\nhideLoadMoreButton();\n\n// Обробник подій форми пошуку\nsearchForm.addEventListener('submit', async function (e) {\n    e.preventDefault();\n    currentQuery = e.target.elements.searchQuery.value.trim();\n    currentPage = 1;\n\n    if (!currentQuery) {\n        iziToast.error({ title: 'Error', message: 'Please enter a search query', position: 'topRight' });\n        return;\n    }\n\n    clearGallery();\n    showLoader();\n    showLoadingMessage();\n    hideLoadMoreButton();\n\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage);\n        totalHits = data.totalHits;\n\n        if (data.hits.length === 0) {\n            iziToast.error({ title: 'Error', message: 'No images found. Try again.', position: 'topRight' });\n            return;\n        }\n\n        createGallery(data.hits);\n\n        iziToast.success({ title: 'Success', message: `Found ${totalHits} images!`, position: 'topRight' });\n\n        if (currentPage < Math.ceil(totalHits / 15)) {\n            showLoadMoreButton();\n        } else {\n            hideLoadMoreButton();\n            iziToast.info({ title: 'Info', message: \"You've reached the end of search results.\", position: 'topRight' });\n        }\n\n        // Очищаємо форму після запиту\n        searchForm.reset();\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: `Error fetching images: ${error.message}`, position: 'topRight' });\n    } finally {\n        hideLoader();\n        hideLoadingMessage();\n    }\n});\n\n// Обробник подій для кнопки \"Load more\"\nloadMoreBtn.addEventListener('click', async function () {\n    showLoader();\n    showLoadingMessage();\n    currentPage++;\n\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage);\n        if (data.hits.length === 0) {\n            hideLoadMoreButton();\n            iziToast.info({ title: 'Info', message: \"You've reached the end of search results.\", position: 'topRight' });\n            return;\n        }\n\n        createGallery(data.hits);\n\n        // Плавне прокручування\n        const card = document.querySelector('.gallery-item');\n        if (card) {\n            const cardHeight = card.getBoundingClientRect().height;\n            window.scrollBy({\n                left: 0,\n                top: cardHeight * 2,\n                behavior: 'smooth'\n            });\n        }\n\n        // Перевірка чи досягли кінця результатів\n        if (currentPage >= Math.ceil(totalHits / 15)) {\n            hideLoadMoreButton();\n            iziToast.info({ title: 'Info', message: \"You've reached the end of search results.\", position: 'topRight' });\n        }\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: `Error fetching more images: ${error.message}`, position: 'topRight' });\n    } finally {\n        hideLoader();\n        hideLoadingMessage();\n    }\n});\n\n// Стилізація для інпута\nif (searchInput) {\n    searchInput.style.width = \"300px\";\n    searchInput.style.padding = \"10px\";\n    searchInput.style.border = \"2px solid #4E35DE\";\n    searchInput.style.borderRadius = \"8px\";\n    searchInput.style.fontSize = \"16px\";\n    searchInput.style.color = \"#333\";\n    searchInput.style.backgroundColor = \"#f9f9f9\";\n    searchInput.style.outline = \"none\";\n    searchInput.style.transition = \"0.3s\";\n\n    // Effect in focus\n    searchInput.addEventListener(\"focus\", () => {\n        searchInput.style.borderColor = \"#61dafb\";\n        searchInput.style.boxShadow = \"0 0 10px rgba(97, 218, 251, 0.5)\";\n    });\n\n    searchInput.addEventListener(\"blur\", () => {\n        searchInput.style.borderColor = \"#4E35DE\";\n        searchInput.style.boxShadow = \"none\";\n    });\n}\n\nconst searchButton = document.querySelector(\"button[type='submit']\");\n\nif (searchButton) {\n    searchButton.style.padding = \"12px 24px\";\n    searchButton.style.fontSize = \"16px\";\n    searchButton.style.fontWeight = \"bold\";\n    searchButton.style.color = \"#ffffff\";\n    searchButton.style.backgroundColor = \"#4E35DE\";\n    searchButton.style.border = \"none\";\n    searchButton.style.borderRadius = \"8px\";\n    searchButton.style.cursor = \"pointer\";\n    searchButton.style.transition = \"0.3s\";\n\n    // Hovering effect\n    searchButton.addEventListener(\"mouseover\", () => {\n        searchButton.style.backgroundColor = \"#61dafb\";\n    });\n\n    searchButton.addEventListener(\"mouseout\", () => {\n        searchButton.style.backgroundColor = \"#4E35DE\";\n    });\n\n    // Effect on click\n    searchButton.addEventListener(\"mousedown\", () => {\n        searchButton.style.transform = \"scale(0.95)\";\n    });\n\n    searchButton.addEventListener(\"mouseup\", () => {\n        searchButton.style.transform = \"scale(1)\";\n    });\n}"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","data","axios","gallery","loader","loadMoreBtn","loadingMessage","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","img","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","showLoadingMessage","hideLoadingMessage","searchForm","searchInput","currentQuery","currentPage","totalHits","e","iziToast","error","card","cardHeight","searchButton"],"mappings":"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"}